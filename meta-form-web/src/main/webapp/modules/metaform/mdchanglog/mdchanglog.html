
<table url="service/metaform/mdtable/log"
	idField="id" treeField="text"
	toolbar=".temp-toolbar" layoutH="0">
    <thead data-options="frozen:true">
        <tr>
        	<th data-options="field:'version'">版本号</th> 
       		<th data-options="field:'changeId'">编号</th>
       		<th data-options="field:'changeDate',formatter:function(value){
                            var date=new Date(value);
                            var year=date.getFullYear();
                            var month=date.getMonth()+1;
                            month=month>9?month:('0'+month);
                            var day=date.getDate();
                            day=day>9?day:('0'+day);
                            var hh=date.getHours();
                            hh=hh>9?hh:('0'+hh);
                            var mm=date.getMinutes();
                            mm=mm>9?mm:('0'+mm);
                            var ss=date.getSeconds();
                            ss=ss>9?ss:('0'+ss);
                            var time=year+'-'+month+'-'+day+' '+hh+':'+mm+':'+ss;
                               return time;
                        }">提交日期</th>
       		<th data-options="field:'changer'" format="User">提交人</th>
	</thead>
	<thead>
       		<th data-options="field:'changeTableSum'">更改表总数</th>
       		<th data-options="field:'changeRelationSum'">更改关系总数</th>
       		<th data-options="field:'changeScript'">更改脚本</th>
       		<th data-options="field:'changeComment'">更改说明</th>
       		<th data-options="field:'auditor'">审核人</th>
       		<th data-options="field:'auditDate'">审核时间</th>
       		
        </tr>
    </thead>
</table>

<div class="temp-toolbar">
	<a iconCls="icon-edit" href="modules/metaform/mdchanglog/mdchanglog-view.html" trigger="single"
		target="dialog" rel="mdchanglog_view" title="查看 {{text}}" width="640" height="480" btnValue="查看">查看</a>
	<hr>
	<a iconCls="icon-base icon-base-ban" trigger="single"
		target="confirm" rel="mdchanglog_remove" title="是否确定删除 {{text}}？">删除</a>
</div>

<script>
	$.parser.onComplete = function(panel) {
		$.parser.onComplete = $.noop;
		
		requirejs([
		           'modules/metaform/mdchanglog/ctrl/mdchanglog'
		          ], function(MdChangLog) {
			window.MdChangLog = new MdChangLog('mdchanglog', panel);
			window.MdChangLog.load(panel);
		});
	};

</script>